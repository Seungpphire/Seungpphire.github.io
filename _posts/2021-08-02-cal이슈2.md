---
title:  "[업무] 이슈- Caloriemeter Circuit reset error issue (2)"
# excerpt: 

categories: 업무
toc: false
toc_sticky: false
 
date: 2021-08-02
last_modified_at:  2021-08-02
published : true
---

## 지난시간

원인분석을 하던 중 마무리 하게 되었는데, 계속해서 소모전류를 떨어뜨리지 못하고 계속해서 먹고있는 부품이 뭔지 원인분석을 해보자. 그 부품을 제거하거나 교체하면 외부전압이 4V로 드롭되었던 문제가 해결될 것이다.
아래의 순서대로 진행하겠다.

**테스트 항목**
1번) 캐패시터 용량(C35)의 변화 1000uF > 480uF 
2번) 인덕터 (L4)의 유무 
3번) 실제 시스템 하드웨어 장비에 연결시 동작 확인

**테스트 결과**

1번) 변화X : 캐패시터 용량을 변화시켜도 외부전압은 전압강하되며, 소모전류는 여전히 5mA 정도로 높다.
![image](https://user-images.githubusercontent.com/82863114/127947241-978c3738-5bc3-484d-83ed-ea6864306dd0.png)

타제조사의 470uF으로 바꿔도 동일한 결과가 나왔다. 따라서 제조사의 특성때문에 본 문제가 생겼다고 할 수도 없다. 그 이유는 동일한 제조사의 캐패시터를 사용한 타 제품은 정상동작을 보였기 때문이다. 
![image](https://user-images.githubusercontent.com/82863114/127947920-ef23f820-8bed-49be-a9ef-2c52567d624a.png)

기존 : 제조사 CHANG 

![image](https://user-images.githubusercontent.com/82863114/127948051-c2b73e66-830a-48f8-9119-573bddda8744.png)

변경 : 제조사 SAM YOUNG 

2번) 인턱터의 유무
인덕터는 전류를 충전하여 전압을 출력하는 기능을 한다. (전압을 충전하여 전압을 충전하는 캐패시터와 비교됨)
캐패시터가 전압의 급격한 변화를 막아주듯이 인덕터 또한 전류의 급격한 변화를 막아주는 것이다. 
인덕터의 특성을 간단히 설명하자면 다음과 같다. 
- 교류 필터링
- 커플링 (변압)

따라서 문제상황의 5mA중 인덕터가 몇 mA를 가져가는지, 또 몇 V를 출력하는지 확인해보자.  
소자를 하나씩 떼어 전류를 따라간 결과, 5mA 소모전류는 D3 회로까지 연결되어 있었다. 
뭔가 오동작 하고있다.

3번) 실제 시스템 하드웨어 장비에 연결시 동작 확인

정상적으로 전원이 켜지고 소모전류도 제대로 떨어진다.
이로써 알 수 있는 사실은 바로 'PC로 테스트할 때 공급된 전류가 부족하다는 사실이다. 

**결론** 

:타제품1, 타제품2는 정상적으로 동작한 점을 미루어보면 해당제품은 기본적으로 외부전원으로부터 타제품들에 비해 더 많은 소모전류를 사용하나, 테스트 했을때에 그만큼의 전류를 공급해주지 못해 전원은 정상동작하지 못했다. 내부전원을 아주 잠시라도 주면 동작했던 이유는 U10 레귤레이터의 입력되는 전류가 충분해져 동작하게 되고, 2.6볼트로 이상하게 낮아져있던 레귤레이터 입력전압은 정상적으로 3.6V로 올라가면서 갑자기 제정신을 차린듯 입력을 10V로 쭉 끌어와준다. 

동작을 보면 딱 그 말이 맞다.
CPR 할 때 제세동기(AED)를 이용해 심장에 전기신호를 주면 멈춰있던 심장이 다시 뛰는것처럼, 배터리가 아주 짧은 시간이나마 닿았다 떨어지면 언제 그랬냐는 듯 죽은 회로가 살아난다. 

![image](https://user-images.githubusercontent.com/82863114/127973657-52abb205-6cf0-4618-9aea-d45a525a225f.png)


**라고 끝맺으려 했으나**

![image](https://user-images.githubusercontent.com/82863114/128147073-07566370-7523-426e-a65d-00c05a0275fb.png)


짐작만 하고 있었는데 소자가 전류부족으로 동작하지 못하고 있었음이 확실해졌다. USB로 연결하여 최대 5V 3A를 출력해주는 허브를 사용하고 있었는데, 다른 포트의 스위치를 끄고 켜고 하는 과정에서 전원이 복귀되는 모습이었다.

정확히 몇 mA의 공급에서 문제가 발생하는지를 찾아야 한다. 
그리고 현장 설치시 실제 이 디바이스가 마주하는 최악의 경우의 전류에서 이 문제가 발생하는지를 알아야 한다.

